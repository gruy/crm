{% extends 'cabinet_index.html' %}
{% block content %}
  <div class="container">
    <div class="col-lg-12">
      {% include 'surface/__include/surface_menu.html' %}
      <div class="panel panel-default">
        <div class="panel-heading">
          <p class="lead text-center remove-bottom">Редактирование подъезда №:{{ object }}, поверхности {{ surface }}</p>
        </div>
        <div class="panel-body">
          <div class="col-lg-12">
            <form action="" role="form" id="js-porch-add-form" method="post">
              {% csrf_token %}
              <div class="col-lg-6">
              {{ porch_form.surface }}
                <div class="form-group">
                  <div class="col-lg-5">{{ porch_form.number.label_tag }}</div>
                  <div class="col-lg-7">{{ porch_form.number }}</div>
                  {{ porch_form.number.errors }}
                  <div class="clearfix"></div>
                </div>
              </div>
              <div class="clearfix"></div>
              <div class="col-lg-4">
                <div class="form-group">
                  <div class="col-lg-8">{{ porch_form.broken_shield.label_tag }}</div>
                  <div class="col-lg-4">{{ porch_form.broken_shield }}</div>
                  {{ porch_form.broken_shield.errors }}
                  <div class="clearfix"></div>
                </div>
                <div class="form-group">
                  <div class="col-lg-8">{{ porch_form.broken_gib.label_tag }}</div>
                  <div class="col-lg-4">{{ porch_form.broken_gib }}</div>
                  {{ porch_form.broken_gib.errors }}
                  <div class="clearfix"></div>
                </div>
                <div class="form-group">
                  <div class="col-lg-8">{{ porch_form.no_glass.label_tag }}</div>
                  <div class="col-lg-4">{{ porch_form.no_glass }}</div>
                  {{ porch_form.no_glass.errors }}
                  <div class="clearfix"></div>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="form-group">
                  <div class="col-lg-8">{{ porch_form.replace_glass.label_tag }}</div>
                  <div class="col-lg-4">{{ porch_form.replace_glass }}</div>
                  {{ porch_form.replace_glass.errors }}
                  <div class="clearfix"></div>
                </div>
                <div class="form-group">
                  <div class="col-lg-8">{{ porch_form.against_tenants.label_tag }}</div>
                  <div class="col-lg-4">{{ porch_form.against_tenants }}</div>
                  {{ porch_form.against_tenants.errors }}
                  <div class="clearfix"></div>
                </div>
              </div>
              <div class="clearfix"></div>
              <div class="col-lg-12">
                <button type="submit" class="btn btn-default">Сохранить изменения</button>
              </div>
            </form>
            <div class="clearfix"></div>
          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <p class="lead text-center remove-bottom">Фотографии подъезда №:{{ object }}</p>
        </div>
        <div class="panel-body">
          <div class="col-lg-6">
            <form action="{% url 'surface:photo-add' %}" role="form" id="js-surface-photo-add-form" class="add-bottom" method="post" enctype="multipart/form-data">
              {% csrf_token %}
              {{ photo_form.porch }}
              <div class="form-group">
                <div class="col-lg-5">{{ photo_form.date.label_tag }}</div>
                <div class="col-lg-7">{{ photo_form.date }}</div>
                {{ photo_form.date.errors }}
                <div class="clearfix"></div>
              </div>
              <div class="form-group">
                <div class="col-lg-5">{{ photo_form.image.label_tag }}</div>
                <div class="col-lg-7">{{ photo_form.image }}</div>
                {{ photo_form.image.errors }}
                <div class="clearfix"></div>
              </div>
              <button type="submit" class="btn btn-default">Сохранить изменения</button>
            </form>
          </div>
          <div class="clearfix"></div>
          <div class="row">
          {% for photo in object.surfacephoto_set.all %}
            <div class="col-lg-3">
              <div>
                <a href="{{ photo.image.url }}" rel="group" class="js-gallery" title="{{ photo.address }}, подъезд: {{ item.porch.number }}">
                  <img src="{{ photo.image_resize.url }}" alt="{{ photo.address }}, подъезд: {{ item.porch.number }}">
                </a>
              </div>
              <div>
                <a href="{% url 'surface:photo-update' photo.id %}">
                  Адрес: {{ photo.address }}
                  <br>
                  Подъезд: {{ photo.porch.number }}, <br>
                  Дата: {{ photo.date }}
                </a><br>
                <a href="{% url 'surface:photo-delete' photo.id %}" class="btn btn-danger">Удалить</a>
              </div>
            </div>
          {% empty %}
            <div class="col-lg-12">
              <p class="alert alert-info">Фотографий не найдено</p>
            </div>
          {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
{% include '__modal/js_ajax_remove_form.html' %}
{% endblock %}