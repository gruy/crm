{% extends 'cabinet_index.html' %}
{% block extra_js %}
  <script src="http://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
  {% include 'adjustertask/__include/map-task.html' %}
{% endblock %}
{% block content %}
  <div class="container">
    <div class="col-lg-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <p class="lead text-center remove-bottom">
            Редактирование задачи
          </p>
          {{ coord }}
        </div>
        <div class="panel-body">
          <div class="col-lg-12">
            <div class="add-bottom panel panel-success">
              <div class="panel-heading js-map-task-heading">
                Карта монтажных работ <span class="caret"></span>
              </div>
              <div class="panel-body js-map-task-body">
                <div id="tasksMap" style="height: 500px;"></div>
                <div class="clearfix"></div>
              </div>
            </div>
          </div>
          <div class="col-lg-12">
          {% if error %}
            <div class="alert alert-danger">
              {{ error }}
            </div>
          {%  endif %}
          {% if success %}
            <div class="alert alert-success">
              {{ success }}
            </div>
          {% endif %}

              <form action="." role="form" id="js-adjuster-client_task-update-form" method="post" data-client-ajax-url="{% url 'adjustertask:client-ajax' %}">
                {% csrf_token %}
                <div class="col-lg-6">
                  <div class="col-lg-12">
                    <p class="lead">Форма редактирования задачи</p>
                  </div>
                  <div class="form-group">
                    <div class="col-lg-5">
                      {{ adjuster_task_form.adjuster.label_tag }}
                    </div>
                    <div class="col-lg-7">
                      {{ adjuster_task_form.adjuster }}
                    </div>
                    {{ adjuster_task_form.adjuster.errors }}
                    <div class="clearfix"></div>
                  </div>
                  <div class="form-group">
                    <div class="col-lg-5">
                      {{ adjuster_task_form.type.label_tag }}
                    </div>
                    <div class="col-lg-7">
                      {{ adjuster_task_form.type }}
                    </div>
                    {{ adjuster_task_form.type.errors }}
                    <div class="clearfix"></div>
                  </div>
                  <div class="form-group">
                    <div class="col-lg-5">
                      {{ adjuster_task_form.date.label_tag }}
                    </div>
                    <div class="col-lg-7">
                      {{ adjuster_task_form.date }}
                    </div>
                    {{ adjuster_task_form.date.errors }}
                    <div class="clearfix"></div>
                  </div>
                </div>
                <div class="col-lg-6">
{#                  <div class="form-group">#}
{#                    <div class="col-lg-5">#}
                      {{ adjuster_task_form.comment.label_tag }}
{#                    </div>#}
{#                    <div class="col-lg-7">#}
                      {{ adjuster_task_form.comment }}
{#                    </div>#}
                    {{ adjuster_task_form.comment.errors }}
{#                    <div class="clearfix"></div>#}
{#                  </div>#}
                </div>
                <div class="col-lg-12">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>id</th>
                        <th>Город</th>
                        <th>Район</th>
                        <th>Улица</th>
                        <th>Номер дома</th>
                        <th>Кол-во подъездов</th>
                        <th>&nbsp;</th>
                      </tr>
                    </thead>
                    <tbody class="js-task-surface-list">
                    {% for ats in task_surface_list %}
                      <tr>
                        <td>{{ ats.id }}</td>
                        <td>{{ ats.surface.street.city }}</td>
                        <td>{{ ats.surface.street.area }}</td>
                        <td>{{ ats.surface.street.name }}</td>
                        <td>{{ ats.surface.house_number }}</td>
                        <td>{{ ats.surface.porch_count }}</td>
                        <td></td>
                      </tr>
                    {% endfor %}
                    </tbody>
                  </table>
                  {% include '__includes/pagination.html' with page_obj=task_surface_list %}
                </div>
                <div class="clearfix"></div>
                <button type="submit" class="btn btn-default">Сохранить</button>
              </form>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}