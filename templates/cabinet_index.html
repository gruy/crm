{% extends 'cabinet_base.html' %}
{% block header %}
<header>
  {% include '__cabinet/header.html' %}
</header>
{% endblock %}
{% block content %}
  <div class="container">
  {% if city_list %}
    <div class="row">
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <p class="lead remove-bottom text-center">Города</p>
          </div>
          <div class="panel-body">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>id</th>
                  <th>Название</th>
                  <th>Модератор</th>
                  <th>Количество поверхностей</th>
                  <th>Количество клиентов</th>
                </tr>
              </thead>
              <tbody>
              {% for city in city_list %}
                <tr>
                  <td>{{ city.id|default:'--' }}</td>
                  <td>{{ city.name|default:'--' }}</td>
                  <td>{{ city.moderator|default:'Не указан' }}</td>
                  <td>{{ city.surface_set.all.count|default:'--' }}</td>
                  <td>{{ city.client_set.all.count|default:'--' }}</td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  {% if client_list %}
    <div class="row">
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <p class="lead remove-bottom text-center">Клиенты</p>
          </div>
          <div class="panel-body">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>id</th>
                  <th>Пользователь</th>
                  <th>Город</th>
                  <th>Юриическое название</th>
                  <th>Руководитель</th>
                  <th>Должность руководителя</th>
                </tr>
              </thead>
              <tbody>
              {% for client in client_list %}
                <tr>
                  <td>{{ client.id|default:'--' }}</td>
                  <td>{{ client.city|default:'--' }}</td>
                  <td>{{ client.user.email|default:'--' }}</td>
                  <td>{{ client.legal_name|default:'Не указан' }}</td>
                  <td>{{ client.leader|default:'Не указан' }}</td>
                  <td>{{ client.leader_function|default:'Не указано' }}</td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  {% endif %}
  </div>
{% endblock %}
